<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Person/Index.vue - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ActInfo.html">ActInfo</a><ul class='methods'><li data-type='method'><a href="module-ActInfo.html#~getData">getData</a></li><li data-type='method'><a href="module-ActInfo.html#~scollRefresh">scollRefresh</a></li></ul></li><li><a href="module-Activity.html">Activity</a><ul class='methods'><li data-type='method'><a href="module-Activity.html#~enterInfo">enterInfo</a></li><li data-type='method'><a href="module-Activity.html#~getList">getList</a></li><li data-type='method'><a href="module-Activity.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Activity.html#~scollRefresh">scollRefresh</a></li></ul></li><li><a href="module-Change.html">Change</a><ul class='methods'><li data-type='method'><a href="module-Change.html#~nextStep">nextStep</a></li></ul></li><li><a href="module-ChooseAi.html">ChooseAi</a><ul class='methods'><li data-type='method'><a href="module-ChooseAi.html#~chooseAi">chooseAi</a></li><li data-type='method'><a href="module-ChooseAi.html#~getAiList">getAiList</a></li><li data-type='method'><a href="module-ChooseAi.html#~submitAi">submitAi</a></li></ul></li><li><a href="module-Follow.html">Follow</a><ul class='methods'><li data-type='method'><a href="module-Follow.html#~getList">getList</a></li><li data-type='method'><a href="module-Follow.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Follow.html#~scollRefresh">scollRefresh</a></li></ul></li><li><a href="module-Forget.html">Forget</a><ul class='methods'><li data-type='method'><a href="module-Forget.html#~getcode">getcode</a></li><li data-type='method'><a href="module-Forget.html#~nextStep">nextStep</a></li></ul></li><li><a href="module-Header.html">Header</a><ul class='methods'><li data-type='method'><a href="module-Header.html#~goBack">goBack</a></li><li data-type='method'><a href="module-Header.html#~goHome">goHome</a></li></ul></li><li><a href="module-Home.html">Home</a></li><li><a href="module-Index.html">Index</a><ul class='methods'><li data-type='method'><a href="module-Index.html#~getBaseData">getBaseData</a></li><li data-type='method'><a href="module-Index.html#~getData">getData</a></li><li data-type='method'><a href="module-Index.html#~getDisease">getDisease</a></li><li data-type='method'><a href="module-Index.html#~getDrugs">getDrugs</a></li><li data-type='method'><a href="module-Index.html#~getFollowData">getFollowData</a></li><li data-type='method'><a href="module-Index.html#~getList">getList</a></li><li data-type='method'><a href="module-Index.html#~goMypatient">goMypatient</a></li><li data-type='method'><a href="module-Index.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Index.html#~scollRefresh">scollRefresh</a></li></ul></li><li><a href="module-line.html">line</a></li><li><a href="module-List.html">List</a><ul class='methods'><li data-type='method'><a href="module-List.html#~addLike">addLike</a></li><li data-type='method'><a href="module-List.html#~inputChange">inputChange</a></li><li data-type='method'><a href="module-List.html#~maxHeight">maxHeight</a></li></ul></li><li><a href="module-Login.html">Login</a><ul class='methods'><li data-type='method'><a href="module-Login.html#~login">login</a></li></ul></li><li><a href="module-Mine.html">Mine</a></li><li><a href="module-Opinion.html">Opinion</a><ul class='methods'><li data-type='method'><a href="module-Opinion.html#~sendOption">sendOption</a></li></ul></li><li><a href="module-Pat_index.html">Pat_index</a><ul class='methods'><li data-type='method'><a href="module-Pat_index.html#~addLike">addLike</a></li><li data-type='method'><a href="module-Pat_index.html#~adopt">adopt</a></li><li data-type='method'><a href="module-Pat_index.html#~creatAction">creatAction</a></li><li data-type='method'><a href="module-Pat_index.html#~getBaseData">getBaseData</a></li><li data-type='method'><a href="module-Pat_index.html#~getHistory">getHistory</a></li><li data-type='method'><a href="module-Pat_index.html#~getHistoryData">getHistoryData</a></li><li data-type='method'><a href="module-Pat_index.html#~getList">getList</a></li><li data-type='method'><a href="module-Pat_index.html#~getMore">getMore</a></li><li data-type='method'><a href="module-Pat_index.html#~getPlanList">getPlanList</a></li><li data-type='method'><a href="module-Pat_index.html#~getPlanResult">getPlanResult</a></li><li data-type='method'><a href="module-Pat_index.html#~getTaskByHzId">getTaskByHzId</a></li><li data-type='method'><a href="module-Pat_index.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Pat_index.html#~passSelect">passSelect</a></li><li data-type='method'><a href="module-Pat_index.html#~scollRefresh">scollRefresh</a></li><li data-type='method'><a href="module-Pat_index.html#~tableSwitch">tableSwitch</a></li></ul></li><li><a href="module-Pat_result.html">Pat_result</a><ul class='methods'><li data-type='method'><a href="module-Pat_result.html#~getChart">getChart</a></li><li data-type='method'><a href="module-Pat_result.html#~getPlanResult">getPlanResult</a></li><li data-type='method'><a href="module-Pat_result.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Pat_result.html#~scollRefresh">scollRefresh</a></li></ul></li><li><a href="module-Patient.html">Patient</a><ul class='methods'><li data-type='method'><a href="module-Patient.html#~checkShow">checkShow</a></li><li data-type='method'><a href="module-Patient.html#~chooseSex">chooseSex</a></li><li data-type='method'><a href="module-Patient.html#~chooseSort">chooseSort</a></li><li data-type='method'><a href="module-Patient.html#~chooseTime">chooseTime</a></li><li data-type='method'><a href="module-Patient.html#~getList">getList</a></li><li data-type='method'><a href="module-Patient.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Patient.html#~reset">reset</a></li><li data-type='method'><a href="module-Patient.html#~scollRefresh">scollRefresh</a></li><li data-type='method'><a href="module-Patient.html#~searchData">searchData</a></li></ul></li><li><a href="module-pie.html">pie</a></li><li><a href="module-Plan.html">Plan</a><ul class='methods'><li data-type='method'><a href="module-Plan.html#~adopt">adopt</a></li><li data-type='method'><a href="module-Plan.html#~allCheck">allCheck</a></li><li data-type='method'><a href="module-Plan.html#~getList">getList</a></li><li data-type='method'><a href="module-Plan.html#~itemChange">itemChange</a></li><li data-type='method'><a href="module-Plan.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Plan.html#~scollRefresh">scollRefresh</a></li><li data-type='method'><a href="module-Plan.html#~searchData">searchData</a></li><li data-type='method'><a href="module-Plan.html#~tableSwitch">tableSwitch</a></li></ul></li><li><a href="module-Register.html">Register</a><ul class='methods'><li data-type='method'><a href="module-Register.html#~getcode">getcode</a></li><li data-type='method'><a href="module-Register.html#~register">register</a></li></ul></li><li><a href="module-Result.html">Result</a><ul class='methods'><li data-type='method'><a href="module-Result.html#~getList">getList</a></li><li data-type='method'><a href="module-Result.html#~goToInfo">goToInfo</a></li><li data-type='method'><a href="module-Result.html#~listRefresh">listRefresh</a></li><li data-type='method'><a href="module-Result.html#~scollRefresh">scollRefresh</a></li><li data-type='method'><a href="module-Result.html#~searchData">searchData</a></li><li data-type='method'><a href="module-Result.html#~tableSwitch">tableSwitch</a></li></ul></li><li><a href="module-ScrollView.html">ScrollView</a><ul class='methods'><li data-type='method'><a href="module-ScrollView.html#~_initScroll">_initScroll</a></li><li data-type='method'><a href="module-ScrollView.html#~disable">disable</a></li><li data-type='method'><a href="module-ScrollView.html#~enable">enable</a></li><li data-type='method'><a href="module-ScrollView.html#~refresh">refresh</a></li><li data-type='method'><a href="module-ScrollView.html#~scrollTo">scrollTo</a></li><li data-type='method'><a href="module-ScrollView.html#~scrollToElement">scrollToElement</a></li></ul></li><li><a href="module-Search.html">Search</a><ul class='methods'><li data-type='method'><a href="module-Search.html#~cleanHistory">cleanHistory</a></li><li data-type='method'><a href="module-Search.html#~historyrsSearch">historyrsSearch</a></li><li data-type='method'><a href="module-Search.html#~submit">submit</a></li></ul></li><li><a href="module-Setting.html">Setting</a><ul class='methods'><li data-type='method'><a href="module-Setting.html#~signOut">signOut</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Person/Index.vue</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;style lang="scss">
.weui-cell {
    padding: 10px 15px;
    position: relative;
    display: flex;
    align-items: center;
}

.vux-popup-header-right {
    color: #f36837 !important;
}

.perInfo {
    &amp;_main {
        .common_nodata {
            position: absolute;
            top: 0;
        }
        background-color: #fff;
        height: 100%;
        .weui-search-bar__cancel-btn {
            color: #666;
            font-size: 15px;
        }
        .weui-search-bar__box .weui-search-bar__input {
            color: #999;
        }
        .weui-search-bar {
            background-color: #f4f4f4;
            &amp;:after {
                display: none;
            }
        }
    }
    &amp;_content {
        &amp;_seeHistory {
            .weui-cell__hd {
                .weui-label {
                    font-size: 15px;
                    color: #333
                }
            }
            .vux-popup-picker-value {
                font-size: 12px;
                color: #666;
            }
        }
        &amp;_resultHistory {
            &amp;:before {
                display: none;
            }
            .weui-cell {
                padding: 0;
            }
            .vux-popup-picker-value {
                color: #999;
                font-size: 12px;
            }
        }
        /* &amp;_planGress{
            width: 100%;
            height: 10px;
            background-color: #d7d7d7;
            border-radius: 10px;
            display: block;
            border: solid 1px rgba(51, 51, 51, 0.09);
            position: relative;
            &amp;:after {
                content: "";
                display: block;
                height: 100%;
                background-color: #10caff;
                border-radius: 10px;
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        } */
        height: 100%;
        overflow-y: auto;
        &amp;_tableBox {
            position: relative;
        }
        &amp;_header {
            font-size: 14px;
            color: #666;
            box-sizing: border-box;
            padding: 0 15px;
            position: relative;
            >h4 {
                font-size: 10px;
                color: #666;
                margin-bottom: 10px;
            }
        }
        &amp;_show {
            position: absolute;
            top: 50px;
            right: 15px;
            color: #999
        }
        &amp;_headerBase {
            display: flex;
            margin: 15px 0;
            margin-top: 0px;
            align-items: center;
            position: relative;
            >h3 {
                font-size: 17px;
                color: #333;
                margin-right: 10px;
            }
            >h5 {
                color: #999;
                font-size: 11px;
            }
            span {
                display: inline-block;
                padding: 0 5px;
                height: 17.5px;
                line-height: 17.5px;
                background-color: #e5e5e5;
                border-radius: 4px;
                border: solid 1px rgba(5, 5, 5, 0.1);
                opacity: 0.36;
                font-size: 10px;
                color: #666;
                margin-left: 10px;
            }
            >button {
                position: absolute;
                right: 0px;
                top: 0;
                display: flex;
                justify-content: center;
                width: 50px;
                height: 23px;
                border-radius: 5px;
                border: solid 1px #f36837;
                font-size: 10px;
                color: #f36837;
                text-align: center;
                line-height: 23px;
            }
            >.haveAdd {
                color: #999999;
                border-color: #999;
            }
        }
        &amp;_box {
            >h4 {
                font-size: 12px;
                color: #f36837;
                margin-bottom: 5px;
            }
        }
        &amp;_headerTitle {
            font-size: 13px;
            color: #f36837;
            margin-bottom: 5px;
        }
        &amp;_headerContent {
            /* display: none; */
            background-color: #f1f1f1;
            border: 1px solid #e6e6e6;
            border-radius: 4px;
            margin-bottom: 5px;
            box-sizing: border-box;
            padding: 5px;
        }
        &amp;_headerSingle {
            font-size: 12px;
            font-weight: 400;
            margin-bottom: 5px;
            color: #999;
            >span {
                font-size: 10px;
                color: #333;
            }
        }
        &amp;_table {
            height: 45px;
            border: 1px solid #e5e5e5;
            border-left: none;
            border-right: none;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            >span {
                display: block;
                height: 100%;
                line-height: 45px;
                text-align: center;
                font-size: 14px;
                color: #999;
                width: calc(50% - 0.5px);
            }
            >.select {
                color: #f36837;
            }
            >i {
                height: 50%;
                width: 1px;
                background-color: #999;
                display: block;
                flex-shrink: 0;
            }
        }
        &amp;_plan {
            box-sizing: border-box;
            padding: 15px;
            position: relative;
        }
        &amp;_planHeader {
            border-bottom: 1px solid #e5e5e5;
            padding-bottom: 10px;
            position: relative;
            >img {
                position: absolute;
                right: 15px;
                width: 50px;
            }
            >h3 {
                font-size: 13px;
                color: #333;
            }
            >span {
                display: block;
                font-size: 12px;
                color: #999;
                margin-top: 5px;
                >b {
                    color: #333;
                }
            }
        }
        &amp;_planSingle {
            >h4 {
                font-size: 13px;
                color: #333;
                margin-bottom: 5px;
            }
            >span {
                display: block;
                font-size: 12px;
                margin-bottom: 5px;
                color: #999
            }
            >p {
                font-size: 12px;
                color: #666
            }
            box-sizing: border-box;
            padding: 10px 0;
            border-bottom: 1px solid #e5e5e5;
        }
        &amp;_planBtn {
            position: fixed;
            bottom: 0;
            left: 0;
            z-index: 499;
            width: 100%;
            height: 45px;
            display: flex;
            background-color: #fff;
            >button {
                flex: 1;
                display: block;
                height: 100%;
                line-height: 45px;
                color: 15px;
                color: #fff;
                text-align: center;
                &amp;:first-of-type {
                    background-color: rgba(243, 104, 55, 0.8);
                }
                &amp;:last-of-type {
                    background-color: #f36837;
                }
            }
        }
        &amp;_result {
            box-sizing: border-box;
            padding: 15px;
            font-size: 13px;
            color: #333;
            position: relative;
            >h3 {
                font-size: 14px;
            }
            >h4 {
                margin: 5px 0;
            }
            >h5 {
                color: #999;
                margin-bottom: 15px;
            }
            .normal {
                color: #f36837;
            }
        }
        &amp;_resultList {
            border-top: 1px solid #e5e5e5;
            box-sizing: border-box;
            padding: 10px 0;
            position: relative;
        }
        &amp;_resultInfoList {
            position: relative;
        }
        &amp;_resultSingle {
            font-size: 12px;
            color: #333;
            margin: 5px 0;
            >span {
                font-size: 12px;
                color: #999;
                margin-right: 2px;
            }
        }
        &amp;_resultInfo {
            border-top: 1px solid #e5e5e5;
            background-color: #fff;
            >h4 {
                font-size: 14px;
                color: #f36837;
                margin: 5px 0;
            }
        }
        &amp;_resultInfoList {
            background-color: #f7f7f7;
            border-radius: 2px;
            border: solid 1px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            padding: 5px;
            padding-bottom: 30px;
        }
        &amp;_resultInfoAi {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            >i {
                font-size: 15px;
                width: 15px;
                height: 15px;
                border-radius: 50%;
                border: 1px solid #999;
                margin-right: 5px;
                display: inline-block;
                flex-shrink: 0;
                flex-grow: 0;
                background-color: #fff;
            }
            >span {
                display: inline-block;
                padding: 5px;
                border-radius: 2px;
                background-color: #fff;
            }
        }
        &amp;_getMore {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
        }
        &amp;_resultInfoUser {
            margin-bottom: 10px;
            display: flex;
            justify-content: flex-end;
            flex-wrap: wrap;
            &amp;_audio {
                width: 100%;
                display: flex;
                justify-content: flex-end;
                align-items: center;
                >i {
                    font-size: 15px;
                    width: 15px;
                    height: 15px;
                    border-radius: 50%;
                    border: 1px solid #999;
                    margin-left: 5px;
                    display: block;
                    background-color: #fff;
                }
                >audio {
                    width: 50%;
                    display: inline-block;
                    padding: 5px;
                    border-radius: 2px;
                    background-color: #fff;
                }
            }
            &amp;_text {
                background-color: #ffffff;
                border-radius: 3px;
                border: solid 1px rgba(5, 5, 5, 0.08);
                margin-top: 5px;
                padding: 5px;
                padding-right: 10px;
                margin-right: 20px;
                display: inline-block;
                >h4 {
                    font-size: 13px;
                    color: #fa2525;
                }
                >.normal {
                    color: #333;
                }
                >h5 {
                    font-size: 12px;
                    color: #333;
                    >span {
                        color: #999;
                    }
                }
            }
        }
        &amp;_resultAction {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            font-size: 15px;
            box-sizing: border-box;
            height: 50px;
            padding: 10px 15px;
            background-color: #fff;
            display: flex;
            justify-content: space-between;
            box-shadow: 0px 0px 4px 1px rgba(0, 0, 0, 0.08);
            >span {
                width: 22%;
                line-height: 30px;
            }
            >button {
                line-height: 30px;
                height: 30px;
                text-align: center;
                width: 22%;
                border-radius: 5px;
                background-color: #f36837;
                color: #fff;
                font-size: 13px;
            }
        }
    }
}
&lt;/style>




&lt;template lang="pug">
    .perInfo
        .perInfo_main
            //-header-cop(:heder_title="title")
            .perInfo_content
                .perInfo_content_planBtn(v-show="currentTable==0&amp;&amp;planList.taskStatus==0")
                    button(type="button",@click="adopt(1)") 不通过
                    button(type="button",@click="adopt(2)") 通过
                actionsheet(@on-click-menu="passSelect",v-model="noPassReason" :menus="noPassList")
                    p(slot="header") 医生审核不通过原因
                b-scroll(
                    :data="list",
                    @scrollToEnd="listRefresh",
                    pullup=false,
                    pulldown=false,
                    ref="scollView",
                    :swiper_nodata="swiper_nodata"
                )
                    popup-picker(title="就诊档案",:data="historyList", v-model="archives" ,@on-change="getHistoryData" ,placeholder="查看历史就诊档案").perInfo_content_seeHistory
                    .perInfo_content_header
                        x-icon(v-show="detailShow&amp;&amp;archivesList.length>0",@click="detailShow=!detailShow",type="ios-arrow-up",size="20").perInfo_content_show
                        x-icon(v-show="!detailShow&amp;&amp;archivesList.length>0",@click="detailShow=!detailShow",type="ios-arrow-down",size="20").perInfo_content_show
                        .perInfo_content_headerBase
                            h3 {{baseData.brxm}}
                            h5 {{baseData.brxb}}/{{baseData.brage}}岁 汉族
                            span(v-show="baseData.GzTag") {{baseData.GzTag}}
                            button(type="button",@click="addLike(0)",v-show="!baseData.GzTag")
                                i.iconfont &amp;#xe61a;
                                | 关注
                            button(type="button",@click="addLike(1)",v-show="baseData.GzTag").haveAdd  已关注
                        h4 疾病诊断：{{baseData.icdName}}
                        h4 联系电话：{{baseData.mobile}}
                        h4 就诊时间：{{baseData.diagnoseTime}}
                        //-具体就诊信息 隐藏
                        .perInfo_content_box(v-show="detailShow")
                            template(v-for="ite in archivesList")
                                h3.perInfo_content_headerTitle 性质：{{ite.mzOrZy=="mz"?"门诊":"住院"}}
                                h4 疾病诊断：{{ite.adminPatientDiagnose.icdName}}
                                template(v-if="ite.mzOrZy=='zy'")
                                    ul(v-for="item,index in ite.znjqrCyxjList",:key="index").perInfo_content_headerContent
                                        li.perInfo_content_headerSingle
                                            span 科室：
                                            | {{item.departname}}
                                        li.perInfo_content_headerSingle
                                            span 医师：
                                            | {{item.doctorname}}
                                        li.perInfo_content_headerSingle
                                            span 入院诊断：
                                            | {{item.admissiondiagnose}}
                                        li.perInfo_content_headerSingle
                                            span 出院诊断：
                                            | {{item.leavediagnose}}
                                        li.perInfo_content_headerSingle
                                            span 入院情况：
                                            | {{item.admissiondescription}}
                                        li.perInfo_content_headerSingle
                                            span 诊治经过：
                                            | {{item.cureprocess}}
                                        li.perInfo_content_headerSingle
                                            span 出院情况：
                                            | {{item.leavedescription}}
                                        li.perInfo_content_headerSingle
                                            span 出院医嘱 ：
                                            | {{item.leavedoctorcharge}}
                                        li.perInfo_content_headerSingle
                                            span 入院时间：
                                            | {{item.admissiontime}}
                                        li.perInfo_content_headerSingle
                                            span 出院时间：
                                            | {{item.leavetime}}
                                template(v-else)
                                    template(v-if="ite.znjqrCfxx")
                                        ul.perInfo_content_headerContent
                                            li.perInfo_content_headerSingle
                                                span 科室：
                                                | {{ite.znjqrCfxx.ksmc}}
                                            li.perInfo_content_headerSingle
                                                span 医师：
                                                | {{ite.znjqrCfxx.ysxm}}
                                            li.perInfo_content_headerSingle
                                                span 用药类型：
                                                | {{ite.znjqrCfxx.cflx}}
                                            li.perInfo_content_headerSingle
                                                span 具体药品：
                                                template(v-for="ite in ite.znjqrCfmxList")
                                                    | {{ite.ypmc}},



                    .perInfo_content_table
                        span(:class="{'select':currentTable==0}",@click="tableSwitch(0)") 随访计划详情
                        i
                        span(:class="{'select':currentTable==1}",@click="tableSwitch(1)") 随访记录
                            //-无数据判断
                    .perInfo_content_tableBox
                        .common_nodata(v-show="noData")
                            i(class="iconfont")  &amp;#xe628;
                            h3.rsAct_nodata_title 暂无数据
                                //-随访方案
                        .perInfo_content_plan(v-show="currentTable==0")
                            .perInfo_content_planHeader
                                img(src="../../assets/img/common/nopass.png",v-show="planList.taskStatus==1")
                                h3 随访方案：{{planList.questionTempleName}}
                                span 随访计划生成时间：{{planList.visitTime}}
                                span 随访计划结束时间：{{planList.endTime}}
                                span 随访任务：{{planList.orderList.length}}次
                                span(v-show="planList.taskStatus==2").perInfo_content_planGress 进度：{{planList.currentTime}}/{{planList.allCount}}
                                span(v-show="planList.taskStatus==1") 不通过原因：{{planList.notPassReason==1?"患者已死亡":planList.notPassReason==2?"患者不接受随访":planList.notPassReason==3?"方案重复":"方案不匹配"}}
                                span(v-show="planList.taskStatus==0")
                                    b {{planList.startDate}}
                                    | &amp;nbsp;后自动通过审核
                            .perInfo_content_planList
                                li(v-for="item,index in planList.orderList" :key="index").perInfo_content_planSingle
                                    h4 第{{index+1}}次随访
                                        span {{item.statusStr}}
                                    span 计划随访时间：{{item.startDate}}
                                    p 采集指标：{{item.CollectionIndex}}

                            //- 随访记录
                        .perInfo_content_result(v-show="currentTable==1")
                            //-h3 随访记录
                            popup-picker(title="随访记录",:data="allCount", v-model="currentCount" ,@on-change="getPlanResult(taskId)" ,placeholder="查看历史随访结果").perInfo_content_resultHistory
                            h4(:class="{'normal':!resultNormal}") {{resultNormal?"结果正常":"结果异常"}}
                            h4(v-show="diseaseInfo!=10") 处理意见：{{diseaseInfo==0?"病情稳定":diseaseInfo==1?"通知就诊":"暂不处理"}}
                            h5 完成时间：{{dateEnd}}
                            ul.perInfo_content_resultList
                                x-icon(@click="getMore",type="ios-arrow-right",size="30").perInfo_content_getMore
                                li(v-for="item,index in resultList",:key="index",v-if="item.isNum").perInfo_content_resultSingle
                                    span {{item.fieldName}}：
                                    | {{item.fieldValue}}
                                li(v-for="item,index in resultList",:key="index",v-if="!item.isNum").perInfo_content_resultSingle
                                    span {{item.fieldName}}：
                                    | {{item.fieldValue}}
                            //- 随访记录详情
                            .perInfo_content_resultInfo
                                h4 记录详情
                                ul.perInfo_content_resultInfoList
                                    template(v-for="item,index in resultList")
                                        li.perInfo_content_resultInfoAi
                                            i.iconfont &amp;#xe610;
                                            span {{item.question}}
                                        li.perInfo_content_resultInfoUser
                                            .perInfo_content_resultInfoUser_audio
                                                audio(controls="controls",:src="basesrc+item.audio")
                                                i.iconfont &amp;#xe63d;
                                            .perInfo_content_resultInfoUser_text
                                                //- 记得加上class判断
                                                h4(:class="{'normal':item.isNormal}") 指标{{item.isNormal?"正常":"不正常"}}
                                                h5
                                                span {{item.fieldName}}:
                                                | {{item.fieldValue}}
                .perInfo_content_resultAction(v-show="diseaseInfo==10&amp;&amp;currentTable==1&amp;&amp;resultList.length>0")
                    span 处理意见：
                    button(@click="creatAction(0)") 病情稳定
                    button(@click="creatAction(1)") 通知就诊
                    button(@click="creatAction(2)") 暂不处理






&lt;/template>

&lt;script>
/** 
 * 患者详情主页组件
 * @module Pat_index
 */
import HeaderCop from '../Common/Header.vue';
import ListCompent from '../Common/List.vue';//引入list列表组件
import BScroll from '../Common/scrollView.vue';
import { Search, PopupPicker, Group, Actionsheet } from 'vux';
import { mapGetters } from 'vuex';
import { API } from '@/services';
export default {
    components: {
        Actionsheet,
        Group,
        PopupPicker,
        BScroll,
        ListCompent,
        Search,
        HeaderCop
    },
    computed: {
        ...mapGetters([

        ])
    },
    data() {
        return {
            resultNormal: true,//是否正常
            title: "患者详情",
            taskId: '',
            detailShow: false,//是否显示患者诊断详情
            id: "",//患者id
            visitOrderId: "",
            basesrc: "",//基础语音前缀
            noPassReason: false,//不通过原因
            noPassList: [{ label: "患者已死亡", value: 1 }, { label: "患者不接受随访", value: 2 }, { label: "方案重复", value: 3 }, { label: "方案不匹配", value: 4 },],
            baseData: {},//用户基础数据
            currentTable: 0,
            archivesList: [],//患者就诊历史数据
            archives: [],//当前已经选择的就诊档案
            historyList: [],//患者档案历史
            copyHistory: [],//用于对比的历史数据
            autoFixed: true,
            /* 上拉加载更多 */
            swiper_pullUp: false,//显示加载
            swiper_nodata: false,//没有更多数据
            list: [],
            //筛选字段集合
            searchParams: {
                pager: 1,
                limit: 20,
            },
            noData: false,//当前页面暂无数据
            planList: {
                orderList: []
            },//随访计划列表
            resultList: [],//随访记录列表
            diseaseInfo: 0,
            allCount: [[]], //总次数
            currentCount: ['第1次记录'],//当前次数
            dateEnd: "",
            type: "",//路由类型
        }
    },
    methods: {
        /**
         * 医生提供处理意见
         * @param  {number} type 处理意见的类型
         * @function creatAction
         */
        creatAction(type) {
            API.followway.updateDiseaseInfo(
                {
                    visitOrderId: this.resultList[0].orderId, //患者的id （必填）
                    diseaseInfo: type,
                }
            ).then((res) => {
                this.getPlanResult(this.taskId);
            }).catch((err) => {

            });
        },
        /**
         * 进入指标详情页面
         * @function getMore
         */
        getMore() {
            let count = this.currentCount[0].substring(1, 2);
            this.$router.push({
                path: '/main/main/mine/patIndex',
                query: {
                    id: this.taskId,
                    hzxxId: this.id,
                    num: count,
                }
            })
        },
        /**
         * 添加关注/取消关注
         * @function addLike
         * @param {number} type 判断添加还是取消关注
         */
        addLike(type) {
            if (type == 0) {
                const _this = this;
                this.$vux.confirm.prompt('', {
                    title: '添加关注标签',
                    placeholder: '不得超过5个字',
                    onConfirm(msg) {
                        API.common.updateGz(
                            {
                                patientId: _this.id, //患者的id （必填）
                                operateTag: msg,
                                operateType: 1, //(操作类型 1:关注 0：取消关注) （必填）
                            }
                        ).then((res) => {
                            _this.$vux.toast.show({
                                text: '关注成功',
                                type: "success"
                            });
                            _this.getBaseData();
                            _this.$nextTick(() => {
                                this.scollRefresh();
                                this.$store.commit('updateLoadingStatus', { isLoading: false });
                            });
                        }).catch((err) => {

                        });
                    }
                })
            } else {
                API.common.updateGz(
                    {
                        patientId: this.id, //患者的id （必填）
                        operateType: 0, //(操作类型 1:关注 0：取消关注) （必填）
                    }
                ).then((res) => {
                    this.$vux.toast.show({
                        text: '取消关注成功',
                        type: "success"
                    });
                    this.getBaseData();
                }).catch((err) => {

                });
            }


        },
        /**
         * 获取历史诊断数据
         * @function getHistoryData
         * @param  {object} value 历史时间列表
         */
        getHistoryData(value) {
            if (value) {
                this.currentTable = 0;
                this.noData = false;
                /**
                 * 日期判断
                 */
                let val = value[0];
                if (val.indexOf('临时随访') == -1) {
                    let taskId;
                    for (const item of this.copyHistory) {
                        if (item.diagnosetime == val) {
                            taskId = item.taskIds[0];
                            break;
                        }
                    }
                    this.taskId = taskId;
                    this.getList(val);
                } else {
                    this.archivesList = [];
                    let i = val.substring(1, 2);
                    this.copyCurrent.forEach((vals, index) => {
                        if ((i - 1) == index) {
                            this.taskId = vals.id;
                        }
                    });
                }
                /**
                 * 获取数据
                 */
                if (this.taskId) {
                    this.getPlanList(this.taskId);
                    this.getPlanResult(this.taskId);
                } else {
                    this.planList = {
                        orderList: []
                    };
                    this.diseaseInfo = 0;
                    this.resultList = [];
                    this.noData = true;
                }

            }

        },
        /**
         * 不通过计划
         * @function passSelect
         * @param  {string} menuKey  组件返回的对象key
         * @param  {object} menuItem 选中的整个对象
         */
        passSelect(menuKey, menuItem) {
            let self = this;
            this.$vux.confirm.show({
                content: "是否确定不通过该计划",
                onConfirm() {
                    API.followplan.editVisitProjectStatus({
                        operateType: 1, //操作类型（1：不通过 2：通过）
                        isAll: 2,  //是否全部提交（(1:是 2：否)）
                        ids: self.taskId,   //要修改的随访方案Id （逗号分隔）
                        noPassReason: menuKey,
                    }).then((res) => {
                        self.$vux.toast.show({
                            text: '不通过成功'
                        });
                        self.listRefresh();
                    });
                }
            });
        },
        /**
         * 随访计划
         * @function adopt
         * @param  {number} type 判断选择通过还是不通过
         */
        adopt(type) {
            if (type != 2) {
                this.noPassReason = true;
                return false;
            }
            let self = this;
            this.$vux.confirm.show({
                content: "确定要通过计划吗？",
                onConfirm() {
                    API.followplan.editVisitProjectStatus({
                        operateType: 2, //操作类型（1：不通过 2：通过）
                        isAll: 2,  //是否全部提交（(1:是 2：否)）
                        ids: "",   //要修改的随访方案Id （逗号分隔）
                    }).then((res) => {
                        self.$vux.toast.show({
                            text: '成功通过'
                        });
                        self.listRefresh();
                    });
                }
            });
        },

        /**
         * table切换
         * @function tableSwitch
         * @param  {number} type 切换选中的类型
         */
        tableSwitch(type) {
            this.currentTable = type;
            this.noData = true;
            if (this.currentTable == 0) {
                if (this.planList.questionTempleName) {
                    this.noData = false;
                }
            } else {
                if (this.resultList.length > 0) {
                    this.noData = false;
                }
            }
        },
        /**
         * 获取就诊历史记录时间表
         * @function getHistory
         */
        getHistory() {
            API.patientList.getRecordDate(
                {
                    patientId: this.id //患者的id
                }
            ).then((res) => {
                /**
                 * 数据格式化
                 */
                let arr = [];
                for (const item of res.data) {
                    arr.push({
                        name: `${item.diagnosetime}/${item.mzOrzy == 1 ? '门诊' : item.mzOrzy == 2 ? '住院' : '住院和门诊'}/${item.isHasVisit == 1 ? '有随访' : '无随访'}`,
                        value: item.diagnosetime
                    })
                }
                this.copyHistory = res.data;
                this.historyList = [arr];

                /**
                 * 合并历史数据
                 */
                this.getTaskByHzId();

            }).catch((err) => {

            });
        },
        /**
         * 获取所有的taskid
         * @function getTaskByHzId
         */
        getTaskByHzId() {
            API.patientList.getTaskByHzId(
                {
                    patient: this.id //计划id
                }
            ).then((res) => {
                this.copyCurrent = res.data;
                (res.data).forEach((val, index) => {
                    let flag = 0;
                    for (const item of this.copyHistory) {
                        if (item.taskIds[0] == val.id) {
                            flag++;
                        }
                    }
                    if (flag == 0) {
                        this.historyList[0].push({
                            name: val.dateAdd + '/临时随访',
                            value: "第" + (index + 1) + "临时随访"
                        });
                    }
                });
                if (this.$route.query.taskId) {
                    let id = this.$route.query.taskId;
                    this.copyCurrent.forEach((val, index) => {
                        if (id == val.id) {
                            this.archives = ["第" + (index + 1) + "临时随访"];
                        }
                    });
                    for (const item of this.copyHistory) {
                        if (id == item.taskIds[0]) {
                            this.archives = [item.diagnosetime];
                        }
                    }
                } else {
                    this.archives = [this.historyList[0][0].value];
                }
                this.getHistoryData(this.archives);
            }).catch((err) => {

            });
        },
        /**
         * 获取患者基本信息
         * @function getBaseData
         */
        getBaseData() {
            API.common.getPatientRecord(
                {
                    visitOrderId: this.visitOrderId, //visitOrder的id //有orderid就传
                    patientId: this.id //患者的id

                }
            ).then((res) => {
                this.baseData = res.data;
                if (this.baseData.taskId) {
                    this.getPlanList(this.baseData.taskId)

                }
            }).catch((err) => {

            });
        },
        /**
         * 获取诊断信息
         * @function getList
         * @param  {string} date 选中的就诊日期
         */
        getList(date) {
            API.patientList.getRecordByDate(
                {
                    patientId: this.id, //病人id
                    date: date,//选择的日期

                }
            ).then((res) => {
                this.archivesList = res.data;
                this.$nextTick(() => {
                    this.scollRefresh();
                    this.$store.commit('updateLoadingStatus', { isLoading: false });
                });
            }).catch((err) => {

            });
        },
        /**
         * 根据id获取随访记录
         * @function getPlanResult
         * @param  {string} id 记录id
         */
        getPlanResult(id) {
            let count = this.currentCount[0].substring(1, 2);
            API.followway.getVisistOrderResult(
                {
                    taskId: id, //计划id
                    num: count
                }
            ).then((res) => {
                this.resultList = res.data || [];
                if (this.resultList.length == 0 &amp;&amp; this.currentTable == 1) {
                    this.noData = true;
                } else {
                    this.noData = false;
                }
                this.basesrc = res.AIVOICURL;
                if (this.allCount[0].length == 0) {
                    for (var index = 0; index &lt; (res.count - 0); index++) {
                        this.allCount[0].push({
                            name: '第' + (index + 1) + '次',
                            value: '第' + (index + 1) + '次记录',
                        })
                    }
                }
                for (const item of res.data) {
                    if (!item.isNormal) {
                        this.resultNormal = false;
                        return false;
                    }
                }

                /**
                 * 判断是否已经
                 */

            }).catch((err) => {

            }).then(() => {
                if (this.resultList[0]) {
                    API.followway.DiseaseType(
                        {
                            visitOrderId: this.resultList[0].orderId //计划id
                        }
                    ).then((res) => {
                        this.diseaseInfo = res.data.diseaseInfo;
                        this.dateEnd = res.data.dateEnd;
                    }).catch((err) => {

                    });
                }

            });
        },
        /**
         * 获取随访计划列表
         * @function getPlanList
         * @param  {string} id 患者id
         */
        getPlanList(id) {
            API.followplan.getVisitOrderDetail(
                {
                    taskId: id //计划id
                }
            ).then((res) => {
                if (res.data.orderList.length > 0) {
                    this.planList = res.data;
                    this.noData = false;
                } else {
                    this.noData = true;
                }
                this.$nextTick(() => {
                    this.scollRefresh();
                    this.$store.commit('updateLoadingStatus', { isLoading: false });
                });
            }).catch((err) => {

            });
        },
        /**
         * 列表刷新
         * @function listRefresh
         */
        listRefresh() {
            this.list = [];
            this.page = 1;
            this.getBaseData();
            this.getHistory();
        },
        /**
        * 滚动实例重置（当前页面总高度发生变化是需要调用此函数）
        * @function scollRefresh
        */
        scollRefresh() {
            this.$refs.scollView.scroll.refresh();
        },
    },
    computed: {
        ...mapGetters([
            'getReload'
        ])
    },
    activated() {
        /*  if(this.getReload){ */
        this.id = this.$route.query.id;
        this.visitOrderId = this.$route.query.visitOrderId;
        this.listRefresh();
        /*  }else{
             this.$store.commit('updateIsReload');
         } */
        /**
         * 获取id
         */
    }
}
&lt;/script>
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Feb 28 2018 16:19:55 GMT+0800 (CST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
